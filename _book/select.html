<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.479">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Game Theory as Decision Theory - 9&nbsp; Selection</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./substantive.html" rel="next">
<link href="./indecisive.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="application/json" class="js-hypothesis-config">
{
  "theme": "clean"
}
</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>
<link rel="stylesheet" href="https://use.typekit.net/uzz2drx.css">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./select.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Selection</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Game Theory as Decision Theory</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/bweatherson/gtadt" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Download" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download"><i class="bi bi-download"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./Game-Theory-as-Decision-Theory.pdf">
              <i class="bi bi-bi-file-pdf pe-1"></i>
            Download PDF
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./Game-Theory-as-Decision-Theory.epub">
              <i class="bi bi-bi-journal pe-1"></i>
            Download ePub
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./Game-Theory-as-Decision-Theory.docx">
              <i class="bi bi-bi-file-word pe-1"></i>
            Download Docx
            </a>
          </li>
      </ul>
    </div>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-1" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-1">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./idealised.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Idealised</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./expectationist.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Expectationist</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./causal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Causal</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mix.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Mixtures</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ratify.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Ratificationist</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dual.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Dual Mandate</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./indecisive.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Indecisive</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./select.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Selection</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./substantive.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Substantive</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./weak.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Weak Dominance, Once</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Conclusion</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./gad.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Games as Decisions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./nidt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Non-Ideal Decision Theory</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Rock-Paper-Scissors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./war-signal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Signals and Outcomes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./buchak.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">Risk-Weighted Utility</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./unique.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">F</span>&nbsp; <span class="chapter-title">Against Uniqueness</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar"><div class="quarto-margin-header"><div class="margin-header-item">
<p>&nbsp;</p>
</div></div>
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">In this chapter:</h2>
   
  <ul>
  <li><a href="#sec-selection-functions" id="toc-sec-selection-functions" class="nav-link active" data-scroll-target="#sec-selection-functions"><span class="header-section-number">9.1</span> Selection Functions</a></li>
  <li><a href="#sec-generating-orderings" id="toc-sec-generating-orderings" class="nav-link" data-scroll-target="#sec-generating-orderings"><span class="header-section-number">9.2</span> Generating Preference Orderings</a></li>
  <li><a href="#sec-counterfactual-selections" id="toc-sec-counterfactual-selections" class="nav-link" data-scroll-target="#sec-counterfactual-selections"><span class="header-section-number">9.3</span> Counterfactual Selections</a></li>
  <li><a href="#sec-held-fixed" id="toc-sec-held-fixed" class="nav-link" data-scroll-target="#sec-held-fixed"><span class="header-section-number">9.4</span> What is Held Fixed?</a></li>
  <li><a href="#sec-mixed-restricted" id="toc-sec-mixed-restricted" class="nav-link" data-scroll-target="#sec-mixed-restricted"><span class="header-section-number">9.5</span> Mixed Strategies and Restricted Choice</a></li>
  <li><a href="#sec-dynamic-restricted" id="toc-sec-dynamic-restricted" class="nav-link" data-scroll-target="#sec-dynamic-restricted"><span class="header-section-number">9.6</span> Dynamic Games and Restricted Choice</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/bweatherson/gtadt/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-select" class="quarto-section-identifier"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Selection</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="sec-selection-functions" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="sec-selection-functions"><span class="header-section-number">9.1</span> Selection Functions</h2>
<p>Some decision theories, most notably EDT, output a valuation of all possible choices. From that valuation a preference function over choices can be easily generated; choices that are more highly valued are preferred to those that are less highly valued. Indeed, that preference ordering will be a total preorder. Other theories, especially the theories that recommend Gathering in Stag Decisions, do not output valuations of all choices, but they do output a preference ordering over all choices. In some cases that is a total preorder, but often it is simply a preorder. Still, they share with EDT the idea that a decision theory outputs a preference ordering over the choices.</p>
<p>GDT rejects this assumption. A decision theory says what the idealised chooser will choose, given some options. It does not go on to say that the chooser will think this option is 7th best, and that one is 9th best. Such further claims would be pointless because they don’t explain behaviour, and explaining behaviour is the aim of the project. One does not behave differently whether this or that unchosen option is preferred.</p>
<p>So we should think of GDT as outputting not a preference function, but a choice function in the sense of <span class="citation" data-cites="Samuelson1938">Samuelson (<a href="references.html#ref-Samuelson1938" role="doc-biblioref">1938</a>)</span>, <span class="citation" data-cites="Chernoff1954">Chernoff (<a href="references.html#ref-Chernoff1954" role="doc-biblioref">1954</a>)</span>, and <span class="citation" data-cites="Sen1971">Sen (<a href="references.html#ref-Sen1971" role="doc-biblioref">1971</a>)</span>. This is consistent with the practice in game theory. Think about the use of solution concepts like subgame perfect equilibrium <span class="citation" data-cites="Bonanno2018">(<a href="references.html#ref-Bonanno2018" role="doc-biblioref">Bonanno 2018</a>, sec 4.4)</span> or Perfect Bayesian equilibrium <span class="citation" data-cites="Bonanno2018">(<a href="references.html#ref-Bonanno2018" role="doc-biblioref">Bonanno 2018</a>, ch.&nbsp;13)</span>. These describe which choices are acceptable in dynamic situations. But they don’t even purport to offer a ranking over the unchosen options. All the theory says is that given a situation, these options are choice-worthy, and these ones are not.</p>
<p>The algorithms one uses to solve games using these concepts don’t suggest that this or that unchosen option is better than some others. If one option is guaranteed to be epsilon worse than the best option in all circumstances, then it will be the first one eliminated by most algorithms, even if in some good sense it is second-best.</p>
<p>That doesn’t mean that anything goes when it comes to choice. We can put some substantive constraints on what a choice function looks like. Following standard practice, when <em>X</em> is a set of options, let <em>c</em>(<em>X</em>) be the set of choice-worthy options in <em>X</em>. (Call this the ‘choice set’.) One plausible principle is that if <em>Y</em> is a subset of <em>X</em>, i.e., it is generated from <em>X</em> by deleting alternatives, then anything in <em>c</em>(<em>X</em>) that is also in <em>Y</em> is in <em>c</em>(<em>Y</em>). That is, deleting options does not turn something choice-worthy into something non-choice-worthy, unless it is indeed deleted. This is called principle <span class="math inline">\(\alpha\)</span> by <span class="citation" data-cites="Sen1971">Sen (<a href="references.html#ref-Sen1971" role="doc-biblioref">1971</a>)</span>, though it is often also (following <span class="citation" data-cites="Moulin1985">Moulin (<a href="references.html#ref-Moulin1985" role="doc-biblioref">1985</a>)</span>) called the Chernoff condition. This name is used because it is equivalent to one of Chernoff’s postulates for choice. And this principle is important in game theory, for without it the method of solving games by deleting rejected options would not make sense.</p>
</section>
<section id="sec-generating-orderings" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="sec-generating-orderings"><span class="header-section-number">9.2</span> Generating Preference Orderings</h2>
<p>I made a lot of assertions in <a href="#sec-selection-functions" class="quarto-xref"><span>Section&nbsp;9.1</span></a> that one might reject. Among other things, one might reject the idea that a selection function does not determine a preference ordering. After all, there are many ways to get from a choice function to a preference ordering. Here is one such way.</p>
<ol type="1">
<li>If <em>o</em><sub>1</sub> <span class="math inline">\(\in\)</span> <em>c</em>(<em>X</em>) and <em>o</em><sub>2</sub> <span class="math inline">\(\notin\)</span> <em>c</em>(<em>X</em>), then <em>o</em><sub>1</sub> is strictly preferred to <em>o</em><sub>2</sub>.</li>
<li>Otherwise, <em>o</em><sub>1</sub> is not strictly preferred to <em>o</em><sub>2</sub>.</li>
</ol>
<p>There’s nothing wrong with point 1 here, but point 2 is implausible. Consider the following ‘game’. Chooser is presented three options: a $20 bill, a $10 bill, and a $5 bill, and told they can choose any one of them. Their choice set is just the $20 bill. But, contra point 2, they strictly prefer the $10 bill, to the $5 bill.</p>
<p>So if we want to turn a selection function into a preference ordering, we need something more sophisticated than this.</p>
<p>I could at this point run through all the possible ways of generating a preference ordering from a selection function, and argue that none of them are adequate. But I suspect this approach would suffer from three problems.</p>
<p>First, there would be enough different things to try that every reader would find my response to at least one of them unconvincing.</p>
<p>Second, it’s not really true that I could survey <em>every</em> response one might take, and a moderately enterprising reader would come up with one I’d missed.</p>
<p>Third, and this is the most important, one might agree with everything I say about the problems of each attempt, and conclude “Ah well, all the worse for the selection function approach.”. If one is convinced that preference orderings are needed, and I’ve argued successfully that every way of generating them from selection functions fails, then one will conclude that decision theory needs more than selection functions. I need a way to convince you that the right conclusion to draw here is that we don’t in fact need preference orderings.</p>
</section>
<section id="sec-counterfactual-selections" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="sec-counterfactual-selections"><span class="header-section-number">9.3</span> Counterfactual Selections</h2>
<p>To that end, let’s start with a slightly different way of generating preference orderings from selection functions.</p>
<ol type="1">
<li>If <em>o</em><sub>1</sub> <span class="math inline">\(\in\)</span> <em>c</em>({<em>o</em><sub>1</sub>, <em>o</em><sub>2</sub>}) and <em>o</em><sub>2</sub> <span class="math inline">\(\notin\)</span> <em>c</em>({<em>o</em><sub>1</sub>, <em>o</em><sub>2</sub>}), then <em>o</em><sub>1</sub> is strictly preferred to <em>o</em><sub>2</sub>.</li>
<li>Otherwise, <em>o</em><sub>1</sub> is not strictly preferred to <em>o</em><sub>2</sub>.</li>
</ol>
<p>This approach has several nice features. First, it gets the case of the three bank notes correct. Second, it captures something intuitively right about what it means to say that one option is preferred to another; it would be chosen over it in a binary choice. Third, it promises to have some explanatory power, as the following case indicates.</p>
<p>Chooser has two unpainted wooden toys, a bus and a truck. Chooser’s job is to paint one of them red, and the other blue, and offer them to Child. Child will then pick one. Chooser will get $2 if Child picks the blue one, and a further $1 if Child picks the bus. Chooser just cares about money, and does not care about Child’s preferences. Child’s preference ordering over toys is common knowledge, and it is:</p>
<blockquote class="blockquote">
<p>Blue truck &gt; red bus &gt; blue bus &gt; red truck</p>
</blockquote>
<p>Chooser will disappoint Child by painting the bus blue, and the truck red, and getting the $3. And the explanation for this is that if they painted things the other way around, Child would select the truck, and Chooser would only get $2.</p>
<p>So it looks like we need choices over counterfactual settings to explain behaviour. It’s because Child would choose blue truck from the options {blue truck, red bus} that Chooser paints the bus blue and the truck red. And this in turn motivates the thought that choices from restricted option sets is exactly the kind of thing we should appeal to in explanations.</p>
<p>Everything I’ve said so far in this section is plausible, but, I hope to convince you, ultimately mistaken. I’ll briefly say why there is a different explanation for what happens in this game, and then spend the rest of the chapter arguing that choices from restricted sets are not something we should include in explanations.</p>
<p>In the Chooser-Child game, we should think of both players as adopting one or other kind of <em>strategy</em>. As noted back in [include cross-ref here] a strategy includes a plan for what to do at every node in the tree where it is one’s responsibility to choose. So child has to plan for what to do whichever choice Chooser makes. Given their preferences, the only rational plan is to always take the blue toy. And given that, Chooser’s only rational play is to paint the truck blue, and hence the bus red. That pair of strategies is the unique sub-game perfect equilibrium of the game.</p>
<p>Crucially, this explanation just appeals to the strategy that Child adopts, and why it is preferable to the other three strategies they might have adopted. It doesn’t appeal at any point to Child’s preferences over the three unadopted strategies. So once we are clear about what the options are, i.e., strategies, there is a possible explanation of the outcome of the game that makes no appeal to preferences over unchosen options.</p>
<p>In the rest of this chapter I’ll run through three reasons for thinking that we should not in fact use things like <em>c</em>({<em>o</em><sub>1</sub>, <em>o</em><sub>2</sub>}) in our explanations of what happens in games. As in the Chooser-Child example, I’ll pay particular attention to what happens in dynamic games.</p>
</section>
<section id="sec-held-fixed" class="level2" data-number="9.4">
<h2 data-number="9.4" class="anchored" data-anchor-id="sec-held-fixed"><span class="header-section-number">9.4</span> What is Held Fixed?</h2>
<p>The first puzzle concerns figuring what <em>c</em>({<em>o</em><sub>1</sub>, <em>o</em><sub>2</sub>}) even means. Is it what Chooser would select if those were the only options and (a) everything else is held fixed; or (b) it is common knowledge that those are the only choices, and everything else is held fixed? These two can come apart, as when Chooser is Row in <a href="#tbl-held-fixed" class="quarto-xref">Table&nbsp;<span>9.1</span></a>.</p>
<div id="tbl-held-fixed" class="anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="table quarto-float-caption quarto-float-tbl" id="tbl-held-fixed-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;9.1: Which is better for Row: B or C?
</figcaption>
<div aria-describedby="tbl-held-fixed-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;"><strong>A</strong></th>
<th style="text-align: center;"><strong>B</strong></th>
<th style="text-align: center;"><strong>C</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><strong>A</strong></td>
<td style="text-align: center;">7,1</td>
<td style="text-align: center;">2,0</td>
<td style="text-align: center;">6,0</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>B</strong></td>
<td style="text-align: center;">1,0</td>
<td style="text-align: center;">1,1</td>
<td style="text-align: center;">5,0</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>C</strong></td>
<td style="text-align: center;">4,0</td>
<td style="text-align: center;">0,0</td>
<td style="text-align: center;">3,1</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>The only ratifiable option is A, and that’s pretty clearly what Chooser will play. But which will they choose if B and C are the only options? Well, that depends on what is held fixed.</p>
<p>As things stand Chooser will expect that Column will play A, so holding everything fixed, they prefer C to B. After all, it gets 4 and B only gets 1.</p>
<p>If it was common knowledge that B and C were the only choices, then Column will not play A, since it is now weakly dominated, and given that, B strongly dominates C. So Chooser will play B.</p>
<p>So the proposal needs to be refined to make clear what <em>c</em>({B, C}) even is in this context. Whichever way that is done, the refined concept seems more ad hoc, and a little less explanatorily powerful, than the initial concept did.</p>
</section>
<section id="sec-mixed-restricted" class="level2" data-number="9.5">
<h2 data-number="9.5" class="anchored" data-anchor-id="sec-mixed-restricted"><span class="header-section-number">9.5</span> Mixed Strategies and Restricted Choice</h2>
<p>Recall <a href="#tbl-frustrator">The Frustrator</a> from <a href="causal.html#sec-no-ratify" class="quarto-xref"><span>Section&nbsp;4.1</span></a>.</p>
<div id="tbl-frustrator" class="anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="table quarto-float-caption quarto-float-tbl" id="tbl-frustrator-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;9.2: The Frustrator
</figcaption>
<div aria-describedby="tbl-frustrator-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<thead>
<tr class="header">
<th style="text-align: center;"></th>
<th style="text-align: center;"><strong>PA</strong></th>
<th style="text-align: center;"><strong>PB</strong></th>
<th style="text-align: center;"><strong>PX</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><strong>A</strong></td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">100</td>
<td style="text-align: center;">50</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>B</strong></td>
<td style="text-align: center;">100</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">50</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>X</strong></td>
<td style="text-align: center;">40</td>
<td style="text-align: center;">40</td>
<td style="text-align: center;">40</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>I argued that the only rational choice there is a 50/50 mixture of A and B. But if we say that <em>c</em> is defined over arbitrary sets of possible choices, we might go on to ask, which is the best pure strategy here? Put another way, what is <em>c</em>({A, B, X})?</p>
<p>That question has no sensible answer. The point of <em>c</em> is that it is what idealised, perfectly rational, Chooser will select. And idealised, perfectly rational, Chooser cannot possibly be facing just that menu of choices. To say they are facing this choice is to say that they are not perfectly rational. And that means that <em>c</em> is not defined.</p>
</section>
<section id="sec-dynamic-restricted" class="level2" data-number="9.6">
<h2 data-number="9.6" class="anchored" data-anchor-id="sec-dynamic-restricted"><span class="header-section-number">9.6</span> Dynamic Games and Restricted Choice</h2>
<p>The argument in <a href="#sec-mixed-restricted" class="quarto-xref"><span>Section&nbsp;9.5</span></a> appealed to my earlier arguments about mixed strategies. There is another version of this argument that makes no such appeal. Consider the following two-stage game.</p>
<ol type="1">
<li>At stage 1, a dollar bill will be placed in front of Chooser. Their option is to take it or leave it.</li>
<li>Whatever they do at stage 1, at stage 2, a new dollar bill will be placed in front of Chooser. Their option is to take it or leave it.</li>
</ol>
<p>At the end, Chooser will have some amount between $2 and $0. Chooser has eight possible strategies, which we’ll denote as XYZ, where X is T if they will take at stage 1, and L otherwise; Y is T if they will take at stage 2 after taking at stage 1, and L if they will leave at stage 2 after taking at stage 1; and Z is T if they will take at stage 2 after leaving at stage 1, and L if they will leave at stage 2 after leaving at stage 1.</p>
<p>The only rational choice here is TTT. That is, given the eight options, Chooser will select TTT. Now we might ask ourselves a new question. If TTT is unavailable, what will Chooser select?</p>
<p>If we think of this as a static game, the answer is easy. Choosing TTL gets $2, all the other options get less than $2, so TTL is best.</p>
<p>But the game is not a static game, it is a dynamic game. And there isn’t any dynamic game where it is meaningful to ask what Chooser will do if TTT is not available. What things can Chooser do or not do under the assumption that TTT is not available? There isn’t a natural answer to this which respects the dynamic nature of the game.</p>
<p>That’s the general case for dynamic games. In general, dynamic games have structural constraints on what choices are available. If some choices are available, some others must be available as well. If TTL is available, TTT must be available too. After all, there is no instruction you can give Chooser which implements a differential restriction on these strategies.</p>
<p>So in general we should not think that if <em>c</em>(<em>S</em>) is meaningful, then <em>c</em> will also be defined for arbitrary subsets of <em>c</em>. And that means we shouldn’t think that <em>c</em>({<em>o</em><sub>1</sub>, <em>o</em><sub>2</sub>}) is in general well-defined. So we shouldn’t think that it is how preference orderings are defined given selection functions. And, relatedly, we shouldn’t think that preferences over non-chosen options are explanatorily important.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-Bonanno2018" class="csl-entry" role="listitem">
Bonanno, Giacomo. 2018. <span>“Game Theory.”</span> Davis, CA: Kindle Direct Publishing. 2018. <a href="http://faculty.econ.ucdavis.edu/faculty/bonanno/GT_Book.html">http://faculty.econ.ucdavis.edu/faculty/bonanno/GT_Book.html</a>.
</div>
<div id="ref-Chernoff1954" class="csl-entry" role="listitem">
Chernoff, Herman. 1954. <span>“Rational Selection of Decision Functions.”</span> <em>Econometrica</em> 22 (4): 422–43. <a href="https://doi.org/10.2307/1907435">https://doi.org/10.2307/1907435</a>.
</div>
<div id="ref-Moulin1985" class="csl-entry" role="listitem">
Moulin, H. 1985. <span>“Choice Functions over a Finite Set: A Summary.”</span> <em>Social Choice and Welfare</em> 2 (2): 147–60.
</div>
<div id="ref-Samuelson1938" class="csl-entry" role="listitem">
Samuelson, Paul A. 1938. <span>“A Note on the Pure Theory of Consumer’s Behaviour.”</span> <em>Econometrica</em> 5 (17): 61–71. <a href="https://doi.org/10.2307/2548836">https://doi.org/10.2307/2548836</a>.
</div>
<div id="ref-Sen1971" class="csl-entry" role="listitem">
Sen, Amartya. 1971. <span>“Choice Functions and Revealed Preference.”</span> <em>Review of Economic Studies</em> 38 (3): 307–17. <a href="https://doi.org/10.2307/2296384">https://doi.org/10.2307/2296384</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    const typesetMath = (el) => {
      if (window.MathJax) {
        // MathJax Typeset
        window.MathJax.typeset([el]);
      } else if (window.katex) {
        // KaTeX Render
        var mathElements = el.getElementsByClassName("math");
        var macros = [];
        for (var i = 0; i < mathElements.length; i++) {
          var texText = mathElements[i].firstChild;
          if (mathElements[i].tagName == "SPAN") {
            window.katex.render(texText.data, mathElements[i], {
              displayMode: mathElements[i].classList.contains('display'),
              throwOnError: false,
              macros: macros,
              fleqn: false
            });
          }
        }
      }
    }
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        typesetMath(container);
        return container.innerHTML
      } else {
        typesetMath(note);
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      typesetMath(note);
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./indecisive.html" class="pagination-link  aria-label=" &lt;span="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Indecisive</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./substantive.html" class="pagination-link" aria-label="<span class='chapter-number'>10</span>&nbsp; <span class='chapter-title'>Substantive</span>">
        <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Substantive</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>